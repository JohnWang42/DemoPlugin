function makeTable(e){let t="<tr><th>ID</th><th>NAME</th><th>USERNAME</th></tr>";e.forEach(e=>{t+=`<tr id="jw-user-${e.id}" data-userid=${e.id}>`+`<td><a onclick="makeDetailRow(${e.id})">${e.id}</a></td>`+`<td><a onclick="makeDetailRow(${e.id})">${e.name}</a></td>`+`<td><a onclick="makeDetailRow(${e.id})">${e.username}</a></td>`+"</tr>"}),document.getElementById("jw-demo-users").innerHTML=t}function makeDetailRow(e){lockTable(),closeDetails();const t=document.getElementById(`jw-user-${e}`);getUser(e).then(e=>e.json()).then(e=>{if(e.success){let s=e.data.user[0];t.insertAdjacentHTML("afterend",'<tr class="jw-user-details"><td colspan="3"><a class="close-btn" onclick="closeDetails()">X</a><div class="td-wrapper"><div class="contact"><h6>Contact Info</h6>'+`<strong>Email: </strong>${s.email}<br>`+`<strong>Phone: </strong>${s.phone}<br>`+`<strong>Website: </strong>${s.website}<br></div>`+'<div class="address"><h6>Address</h6>'+`${s.address.street}<br>`+`${s.address.suite}${s.address.suite?"<br>":""}`+`${s.address.city}, ${s.address.zipcode}<br></div>`+'<div class="company"><h6>Company</h6>'+`${s.company.name}<br>`+`${s.company.catchPhrase}<br></div>`+"</div></td></tr>")}else showMsg("Unable to retrieve user data","error");unlockTable()}).catch(e=>{console.error("Error:",e),showMsg("Unable to retrieve user data","error"),unlockTable()})}function showMsg(e,t="info"){const s=document.getElementById("jw-msg-box");s.innerText=e,s.classList.remove("hidden","info","success","error"),s.classList.add(t),setInterval(()=>{document.getElementById("jw-msg-box").classList.add("hidden")},5e3)}async function getUsers(){const e=new URLSearchParams({action:"jwGetUsers",nonce:jwdemo._nonce});return await fetch(jwdemo.ajaxurl,{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:e.toString()})}async function getUser(e){const t=new URLSearchParams({action:"jwGetUser",jw_userid:e,nonce:jwdemo._nonce});return await fetch(jwdemo.ajaxurl,{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:t.toString()})}function closeDetails(){document.querySelectorAll(".jw-user-details").forEach(e=>{e.remove()})}function lockTable(){document.getElementById("jw-demo-modal").classList.remove("hidden")}function unlockTable(){document.getElementById("jw-demo-modal").classList.add("hidden")}document.addEventListener("DOMContentLoaded",function(){makeTable(jwdemo.users)});